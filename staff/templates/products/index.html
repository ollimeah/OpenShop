{% extends "main.html" %}

{% block title %}Products{% endblock title %}

{% block content %}
<div class="container py-5">
    <div class="d-flex justify-content-between pb-3">
        <h2>Products</h2>
        <a href="" class="align-self-center"><button type="button" class="btn btn-primary">Create product</button></a>
    </div>
    <div class="p-2 border rounded">
        <table class="table table-striped table-hover table-responsive-md text-center" id="productsTable">
        <thead class="thead-dark">
            <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Max</th>
            <th>Sold</th>
            <th>Available</th>
            <th><i class="bi bi-trash"></i></th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
            <td><a href="" class="text-dark">{{ product.name }}</a></td>
            <td>{{ product.category }}</td>
            <td>Â£{{ product.price }}</td>
            <td>{{ product.max }}</td>
            <td>{{ product.numSold }}</td>
            <td>
                {% if product.available %}
                <i class="bi bi-check text-success h5"></i>
                {% else %}
                <i class="bi bi-x text-danger h5"></i>
                {% endif %}
            </td>
            <td>
                <form action="" method="post">
                {% csrf_token %}
                <button type="submit" name="button" class="btn p-0 m-0" onclick="return confirm('Are you sure you want to delete {{ product.name }}?');"><i class="bi bi-trash" data-toggle="tooltip" data-placement="bottom" title="Delete"></i></button>
                </form>
            </td>
            </tr>
            {% endfor %}
        </tbody>
        </table>
    </div>
</div>

{% endblock content %}

{% block scripts %}
<script type="text/javascript">
    $(document).ready( function () {
        $('#productsTable').DataTable();
    } );
</script>
{% endblock scripts %}